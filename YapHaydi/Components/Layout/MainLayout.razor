@inherits LayoutComponentBase

<div>
	<div>
		<div class="w-dvw bg-sky-500 text-white h-9 items-center justify-start px-2 flex fixed z-50">
			<NavMenu UsrTkn="@usrTkn" />
		</div>
		<main class="relative top-10">
			<article >
				@Body
			</article>
		</main>
	</div>
</div>

<div id="blazor-error-ui">
	An unhandled error has occurred.
	<a href="" class="reload">Reload</a>
	<a class="dismiss">🗙</a>
</div>

@code {
	[CascadingParameter]
	public AppState appState { get; set; }

	[CascadingParameter]
	public HttpContext? context { get; set; }

	//[Inject]
	//IUsrDic usrDic { get; set; }

	private string usrTkn { get; set; }

	protected override void OnInitialized()
	{
		usrTkn = context?.Request.Cookies["YapHaydi"] ?? "";  // null ise yok/expired
																	

		// if (usrTkn != null)
		// {
		//     var ok = usrDic.Add(usrTkn); // Tkn a karsilik gelen usr bilmiyor
		//     if (!ok)
		//     {
		//         CookieOptions cookieOptions = new CookieOptions();
		//         cookieOptions.Expires = DateTime.Now;   // Sure bitince browser silmiyor, ama null gonderiyor
		//         context.Response.Cookies.Append("YapHaydi", usrTkn, cookieOptions);
		//     }
		// }
	}

}